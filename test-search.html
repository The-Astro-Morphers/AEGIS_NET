<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        input { padding: 10px; width: 70%; margin-right: 10px; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        .results { margin-top: 20px; }
        .result { padding: 10px; border: 1px solid #ddd; margin: 5px 0; cursor: pointer; }
        .result:hover { background: #f5f5f5; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Search Functionality Test</h1>
        <div>
            <input type="text" id="searchInput" placeholder="Enter address..." />
            <button id="searchBtn" onclick="searchLocation()">Search</button>
        </div>
        <div id="results" class="results"></div>
        
        <h2>Test Instructions:</h2>
        <ol>
            <li>Type "New York" in the search box</li>
            <li>Click the Search button</li>
            <li>You should see 3 results appear</li>
            <li>Click on any result to select it</li>
        </ol>
    </div>

    <script>
        const mockResults = [
            {
                address: '123 Main St, New York, NY 10001',
                latitude: 40.7128,
                longitude: -74.0060,
                formatted_address: '123 Main St, New York, NY 10001, USA'
            },
            {
                address: '456 Broadway, New York, NY 10013',
                latitude: 40.7589,
                longitude: -73.9851,
                formatted_address: '456 Broadway, New York, NY 10013, USA'
            },
            {
                address: '789 5th Ave, New York, NY 10022',
                latitude: 40.7505,
                longitude: -73.9934,
                formatted_address: '789 5th Ave, New York, NY 10022, USA'
            }
        ];

        function searchLocation() {
            const query = document.getElementById('searchInput').value;
            const resultsDiv = document.getElementById('results');
            
            if (!query.trim()) {
                alert('Please enter a search term');
                return;
            }

            console.log('Searching for:', query);
            
            const filteredResults = mockResults.filter(result =>
                result.address.toLowerCase().includes(query.toLowerCase()) ||
                result.formatted_address.toLowerCase().includes(query.toLowerCase())
            );

            console.log('Filtered results:', filteredResults);

            resultsDiv.innerHTML = '';
            if (filteredResults.length === 0) {
                resultsDiv.innerHTML = '<p>No results found</p>';
            } else {
                filteredResults.forEach((result, index) => {
                    const resultDiv = document.createElement('div');
                    resultDiv.className = 'result';
                    resultDiv.innerHTML = `
                        <strong>${result.address}</strong><br>
                        <small>${result.formatted_address}</small>
                    `;
                    resultDiv.onclick = () => selectLocation(result);
                    resultsDiv.appendChild(resultDiv);
                });
            }
        }

        function selectLocation(result) {
            alert('Selected: ' + result.address);
            console.log('Selected location:', result);
        }

        // Enable/disable search button based on input
        document.getElementById('searchInput').addEventListener('input', function() {
            const searchBtn = document.getElementById('searchBtn');
            searchBtn.disabled = !this.value.trim();
            console.log('Input changed:', this.value, 'Button disabled:', searchBtn.disabled);
        });

        // Allow Enter key to search
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchLocation();
            }
        });

        // Initial state
        document.getElementById('searchBtn').disabled = true;
    </script>
</body>
</html>
